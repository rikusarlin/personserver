(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),l=t(2),c=t(3),i=t.n(c),d="/api/persons",m=function(){return i.a.get(d).then((function(e){return e.data}))},s=function(e){return i.a.post(d,e).then((function(e){return e.data}))},f=function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"info"},n)},b=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},v=function(e){var n=e.id,t=e.name,a=e.number,o=e.deleteCertainPerson;return r.a.createElement("li",null,t," ",a," ",r.a.createElement("button",{onClick:function(){return o(n)}},"delete"))},g=function(e){var n=e.persons,t=e.filterValue,a=e.deleteCertainPerson,o=n.filter((function(e){return e.name.toUpperCase().indexOf(t.toUpperCase())>=0})).map((function(e){return r.a.createElement(v,{key:e.id,id:e.id,name:e.name,number:e.number,deleteCertainPerson:a})}));return r.a.createElement("div",null,r.a.createElement("ul",null,o))},E=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,o=e.newNumber,u=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},C=function(e){var n=e.filterValue,t=e.handleFilterChange;return r.a.createElement("div",null,"filter persons with ",r.a.createElement("input",{value:n,onChange:t}))},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),c=Object(l.a)(u,2),i=c[0],d=c[1],v=Object(a.useState)(""),O=Object(l.a)(v,2),w=O[0],j=O[1],N=Object(a.useState)(""),P=Object(l.a)(N,2),k=P[0],S=P[1],y=Object(a.useState)(null),T=Object(l.a)(y,2),U=T[0],V=T[1],x=Object(a.useState)(null),A=Object(l.a)(x,2),D=A[0],F=A[1];Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{message:U}),r.a.createElement(b,{message:D}),r.a.createElement(C,{filterValue:k,handleFilterChange:function(e){S(e.target.value)}}),r.a.createElement("h3",null,"Add a new person"),r.a.createElement(E,{addPerson:function(e){e.preventDefault(),console.log("Persons before: ",t);var n={name:i,number:w},a=t.map((function(e){return e.name}));console.log("Names:",a);var r=a.indexOf(i);if(r>=0){!0===window.confirm("".concat(i," is already added to the phonebook, replace the old number with a new one?"))?(console.log("Updating name: ",n.name),n.id=t[r].id,f(n.id,n).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),console.log("Persons after update: ",t),V("Updated phone number of ".concat(n.name)),d(""),j(""),setTimeout((function(){V(null)}),5e3)})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),5e3)}))):console.log("Not adding ".concat(i,"  since it is already added to the phonebook"))}else{console.log("Adding name: ",n.name);var u=t.reduce((function(e,n){return e.id>n.id?e:n}));n.id=u.id+1,s(n).then((function(e){var a=t.concat(e);o(a),console.log("Persons after addition: ",a),V("Added ".concat(n.name)),d(""),j(""),setTimeout((function(){V(null)}),5e3)})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),5e3)}))}},newName:i,handleNameChange:function(e){d(e.target.value)},newNumber:w,handleNumberChange:function(e){j(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{persons:t,filterValue:k,deleteCertainPerson:function(e){var n=t.filter((function(n){return n.id===e})).reduce((function(e){return e.name})).name;!0===window.confirm("Delete ".concat(n," ?"))&&h(e).then((function(){o(t.filter((function(n){return n.id!==e}))),V("Deleted ".concat(n)),setTimeout((function(){V(null)}),5e3)})).catch((function(){m().then((function(e){o(e)})),F("Information of  ".concat(n," has already been removed from the server")),setTimeout((function(){F(null)}),5e3)}))}}))};t(36);u.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.31040d45.chunk.js.map